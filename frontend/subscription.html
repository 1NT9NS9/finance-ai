<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Оформление подписки</title>
<link rel="stylesheet" href="style.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous"></script>
<style>
body{background:#111;color:#fff;font-family:"Segoe UI",sans-serif;display:flex;justify-content:center;align-items:center;min-height:100vh;padding:16px;}
.card{background:#1b1b1b;padding:24px;border-radius:16px;box-shadow:0 0 12px rgba(0,0,0,.6);max-width:420px;width:100%;}
.card h2{text-align:center;margin-bottom:16px;}
.form-field{display:flex;flex-direction:column;margin-bottom:12px;}
.form-field label{margin-bottom:4px;font-size:.9rem;}
.form-field input{padding:10px;border-radius:8px;border:1px solid #444;background:#222;color:#fff;}
button{padding:12px 24px;border:none;border-radius:8px;cursor:pointer;background:#00a86b;color:#fff;font-weight:600;width:100%;}
button:disabled{background:#444;cursor:not-allowed;}
.plan-btn{margin:6px 0;}
.notice{font-size:.8rem;margin-top:12px;text-align:center;}
#overlay-thanks{position:fixed;top:0;left:0;width:100%;height:100%;backdrop-filter:blur(6px);display:flex;justify-content:center;align-items:center;z-index:2000;}
#overlay-thanks .box{background:#1b1b1b;padding:24px 32px;border-radius:16px;max-width:380px;width:90%;text-align:center;position:relative;}
#overlay-thanks .box span{position:absolute;top:8px;right:12px;font-size:1.2rem;cursor:pointer;}
</style>
</head>
<body>
<div class="card" id="step1">
 <h2>Данные покупателя</h2>
 <div class="form-field"><label>Фамилия *</label><input type="text" id="ln" required></div>
 <div class="form-field"><label>Имя *</label><input type="text" id="fn" required></div>
 <div class="form-field"><label>Отчество</label><input type="text" id="mn"></div>
 <div class="form-field"><label>Дата рождения</label><input type="date" id="dob"></div>
 <div class="form-field"><label>Email *</label><input type="email" id="email" required></div>
 <div class="form-field"><label>Телефон</label><input type="tel" id="phone"></div>
 <button id="continue" disabled>Продолжить</button>
</div>

<div class="card" id="step2" style="display:none;">
 <h2>Ваши платежные данные</h2>
 <div class="form-field"><label>Номер карты</label><input type="text" maxlength="16" id="card"></div>
 <div class="form-field"><label>Месяц/Год</label><input type="text" maxlength="5" placeholder="MM/YY" id="exp"></div>
 <div class="form-field"><label>Владелец карты</label><input type="text" id="holder"></div>
 <div class="form-field"><label>CVC код</label><input type="text" maxlength="3" id="cvc"></div>
 <button class="plan-btn" id="pay3" disabled>Оплатить на 3 месяца (30 000 ₽)</button>
 <button class="plan-btn" id="pay12" disabled>Оплатить на 1 год (100 000 ₽, скидка 20 000 ₽)</button>
</div>

<script>
const required=['ln','fn','email'];
function validate(){
 const ok=required.every(id=>document.getElementById(id).value.trim()!=='');
 document.getElementById('continue').disabled=!ok;
}
required.forEach(id=>document.getElementById(id).addEventListener('input',validate));

document.getElementById('continue').onclick=()=>{
 document.getElementById('step1').style.display='none';
 document.getElementById('step2').style.display='block';
}

// payment validation
const payInputs=['card','exp','cvc'];
payInputs.forEach(id=>document.getElementById(id).addEventListener('input',validatePay));
function validatePay(){
  const card=document.getElementById('card').value.trim();
  const exp=document.getElementById('exp').value.trim();
  const cvc=document.getElementById('cvc').value.trim();
  const cardOk=/^\d{16}$/.test(card);
  const expOk=/^\d{2}\/\d{2}$/.test(exp);
  const cvcOk=/^\d{3}$/.test(cvc);
  const enable=cardOk && expOk && cvcOk;
  document.getElementById('pay3').disabled=!enable;
  document.getElementById('pay12').disabled=!enable;
}

function showThanks(){
  const overlay=document.createElement('div');overlay.id='overlay-thanks';
  overlay.innerHTML=`<div class="box"><span id="close-thanks">&times;</span><h3>Спасибо, что выбрали наш продукт!</h3><p style="font-size:.85rem;">Наш сайт находится в бета-версии, оплата подписки пока недоступна.</p></div>`;
  document.body.appendChild(overlay);
  document.getElementById('close-thanks').onclick=()=>{window.location.href='index.html';};
  setTimeout(()=>{window.location.href='chat.html';},5000);
}

document.getElementById('pay3').onclick=document.getElementById('pay12').onclick=()=>{
  showThanks();
};
</script>
</body>
</html> 